# [III과목]


## 01장 ) R 기초와 데이터 마트

### R 데이터 구조

1. 벡터
- 데이터 타입이 같은 여러 데이터를 하나의 행으로 저장하는 1차원 데이터 구조.
- ‘연결하다’라는 의미의 ‘concatenate’의 c를 써서 데이터를 묶을 수 있다.
- c 안에 콤마를 구분자로 써서 성분을 직접 입력하거나 콜론(:)을 사용해 시작값과 끝값 지정.

```r
> v4 <- c(3, TRUE, FALSE)
> v4
[1] 3 1 0
> v5 <- c('a', 1, TRUE)
> v5
[1] "a" "1" "TRUE"
> v1 <- c(1 : 6)
> v1
[1] 1 2 3 4 5 6
```

2. 행렬
- 2차원 구조를 가진 벡터.
- 벡터의 성질을 가지므로 행렬에 저장된 모든 데이터는 같은 타입이어야함
- 그렇지 못할 경우 자동으로 타입 변환 수행
- matrix를 사용하여 행렬을 만들 경우 `nrow`를 사용하여 행의 수를 결정하거나 `ncol` 을 사용해 열의 수 결정

```r
> m1 <- matrix( c(1:6), nrow = 2)
> m1
		[,1] [,2] [,3]
[1,]  1    3    5
[2,]  2    4    6
>m2 <- matrix( c(1:6), ncol = 2)
>m2
    [,1] [,2]
[1,]  1    4
[2,]  2    5
[3,]  3    6  
```

- matrix를 사용해 행렬을 만들 경우 행렬의 값들이 열로 저장
- `byrow` 옵션에 T를 지정하면 값들이 행으로 저장

```r
> m3 <- matrix ( c(1:6), nrow = 2, byrow = T)
> m3
     [,1] [,2] [,3]
 [1,]  1    2    3
 [2,]  4    5    6
```

- 벡터에 차원을 주는 방법으로도 행렬 생성 가능
- `dim` 함수를 사용해 행의 개수와 열의 개수 지정하여 행렬로 변환
- `dim` 함수는 벡터를 행렬로 변환할 뿐만 아니라 주어진 행렬이 몇 개의 행과 몇 개의 열로 구성되어 있는지 행렬의 크기를 나타내기도 함

```r
> v1 <- c( 1 : 6)
> v1
[1] 1 2 3 4 5 6
> dim(v1) <- c(2, 3)
> v1
		[,1] [,2] [,3]
[1,]  1    3    5
[2,]  2    4    6
```

3. 배열
- 3차원 이상의 구조를 갖는 벡터를 배열이라고 함
- 배열 또한 벡터의 성질을 가지므로 배열에 포함된 데이터는 모두 같은 타입
- `array` 를 사용해 배열을 만들 수 있으나 몇 차원의 구조를 갖는지 `dim` 옵션에 명시해야됨
- 그렇지 않으면 1차원 벡터가 생성됨

```r
> a1 <-array( c (1: 12), dim = c(2, 3, 2))
> a1
,  ,  1
      [,1] [,2] [,3]
  [1,]  1    3    5
  [2,]  2    4    6
,  ,  2
      [,1] [,2] [,3]
  [1,]  7    9    11
  [2,]  8   10    12
```

- 행렬과 마찬가지로 `dim` 함수를 사용해 벡터에 차원을 지정해 배열 생성 가능

```r
> a2 <- c(1:12)
> a2
[1] 1 2 3 4 5 6 7 8 9 10 11 12
> dim (a2) <- c(2, 3, 2)
> a2
,  ,  1
      [,1] [,2] [,3]
  [1,]  1    3    5
  [2,]  2    4    6
,  ,  2
      [,1] [,2] [,3]
  [1,]  7    9    11
  [2,]  8   10    12
```

4. 리스트
- 데이터타입, 데이터 구조에 상관없이 사용자가 원하는 모든 것을 저장 가능한 자료구조

5. 데이터프레임
- 데이터 분석을 위한 2차원 구조를 갖는 관계형 데이터 구조로 R에서 가장 많이 활용됨
- 행렬과 같은 모양을 갖지만 여러 개의 벡터로 구성되어 있기 때문에 각 열은 서로 다른 타입의 데이터를 가질 수 있음

```r
> v1 <- c ( 1, 2, 3)
> v2 <- c( 'a', 'b', 'c')
> df1 <- data.frame(v1, v2)
> df1
  v1 v2
1  1  a
2  2  b
3  3  c
```

<aside>
💡 파이썬, 자바, C 등과 다르게 R의 벡터는 시작 인덱스 값을 1로 갖는다

</aside>

### R 내장 함수

1. 기본함수

| 함수 | 내용 |
| --- | --- |
| help() 또는 ? | 함수들의 도움말 볼 수 있음 |
| paste() | 문자열 이어붙임 |
| seq() | 시작값, 끝값, 간격으로 수열 생성 |
| rep() | 주어진 데이터를 일정 횟수만큼 반복 |
| rm() | 대입 연산자에 의해 생성된 변수 삭제 |
| ls() | 현재 생성된 변수들의 리스트 보여줌 |
| print() | 값을 콘솔창에 출력 |

2. 통계함수

| 함수 | 내용 |
| --- | --- |
| sum | 합 |
| mean | 평균 |
| median | 중앙값 |
| var | 분산 |
| sd | 표준편차 |
| max | 최댓값 |
| min | 최솟값 |
| range | 최댓값과 최솟값 |
| summary | 요약값 |
| skewness | 왜도 |
| kurtosis | 첨도 |

### R 데이터핸들링

1. 데이터 이름 변경
- 행렬, 배열, 데이터프레임과 같이 2차원 이상의 데이터구조는 `colnames`  와 `rownames` 함수를 사용해 행과 열의 이름을 알수 있으며, 이름 지정 가능

2. 데이터 추출
- R 이 보유한 여러 데이터구조 모두 인덱싱을 지원함
- 따라서 대괄호 [, ] 를 사용하여 원하는 위치의 데이터 얻기 가능
- 행과 열의 이름으로도 데이터 얻기 가능
- 데이터프레임에서는 $ 기호를 사용하여 원하는 열의 데이터 구할 수 있으며 $와 [ ] 혼용 가능

3. 데이터 결합
- `rbind` : 데이터를 행으로 결합
- `cbind` : 데이터를 열로 결합
- 행렬과 행렬, 데이터프레임과 데이터프레임의 경우 행의 수 혹은 열의 수가 같을 경우 결합 가능
- 벡터와 벡터의 결합에서는 재사용 규칙으로 인해 부족한 데이터를 앞에서부터 다시 재활용하여 사용하며 오류와함께 결과 반환

### 제어문

1. 반복문
- for와 while 두 가지 종류

```r
> for( i in 1:3) {
+ print( i )
+ }

[1] 1
[1] 2
[1] 3

> data <- c( "a" , "b", "c")
> for ( i in data) {
print( i )
}
[1] "a"
[1] "b"
[1] "c"
```

2. 조건문
- 참과 거짓에 따라 특정 코드가 수행될지 아닐지 결정

3. 사용자 정의 함수

```r
> comparedTo5 <- function (number) {
> if (number < 5)
print(' number는 5보다 작다')
}
else if (number > 5) {
print ('number는 5보다 크다')
}
else {
print(' number는 5와 같다')
}
}
> comparedTo5( 10 )
[1] "number는 5보다 크다"
```

4. 주석
- R에서 실행되지 않는 문장으로, #으로 표시

### 통계분석에 자주 사용되는 R 함수

1. 숫자 연산

| 함수 | 내용 |
| --- | --- |
| sqrt | 제곱근 |
| abs | 절댓값 |
| exp | 자연상수e의 제곱수 |
| log | 밑이 자연상수인 로그 |
| log10 | 밑이 10인 로그 |
| pi | 원주율 |
| round | 반올림 |
| ceiling | 올림 |
| floor | 내림 |

2. 문자연산

| 함수 | 내용 |
| --- | --- |
| tolower | 주어진 문자열을 소문자로 전환 |
| toupper | 주어진 문자열을 대문자로 전환 |
| nchar | 주어진 문자열의 길이 구함 |
| substr | 문자열의 일부분 추출 |
| strsplit | 문자열을 구분자로 나누어 쪼갬 |
| grepl | 문자열에 주어진 문자가 있는지 확인 |
| gsub | 문자열의 일부분을 다른 문자로 대체 |

3. 벡터연산

| 함수 | 내용 |
| --- | --- |
| length | 주어진 벡터의 길이  |
| paste | 주어진 벡터를 구분자 기준으로 결합 |
| cov | 두 수치 벡터의 공분산  |
| cor | 두 수치 벡터의 상관계수  |
| table | 데이터의 개수 |
| order | 벡터의 순서 |

4. 행렬연산

| 함수 | 내용 |
| --- | --- |
| t | 전치행렬을 구한다 |
| diag | 대각행렬을 구한다 |
| %*% | 두 행렬을 곱한다 |

5. 데이터 탐색

| 함수 | 내용 |
| --- | --- |
| head | 데이터의 앞 일부분을 보여준다 |
| tail | 데이터의 뒤 일부분을 보여준다 |
| quantile | 수치 벡터의 4분위수를 보여준다 |

6. 데이터 전처리

| 함수 | 내용 |
| --- | --- |
| subset | 데이터에서 조건식에 맞는 데이터 추출 |
| merge | 두 데이터를 특정 공통된 열을 기준으로 병합 |
| apply | 데이터에 열 별로 주어진 함수 적용 |

7. 정규분포(기본값은 표준 정규 분포로 mean = 0, sd = 1)

| 함수 | 내용 |
| --- | --- |
| dnorm | 정규 분포의 주어진 값에서 함수 값을 구함 |
| rnorm | 정규 분포에서 주어진 개수만큼 표본 추출 |
| pnorm | 정규 분포에서 주어진 값보다 작을 확률 값 구함 |
| qnorm | 정규 분포에서 주어진 넓이 값을 갖는 x값 구함 |

8. 표본추출

| 함수 | 내용 |
| --- | --- |
| runis | 균일 분포에서 주어진 개수만큼 표본 추출 |
| sample | 주어진 데이터에서 주어진 개수만큼 표본 추출 |

9. 날짜

| 함수 | 내용 |
| --- | --- |
| Sys.Date | 연,월,일 출력 |
| Sys.time | 연,월,일,시간 출력 |
| as.Date | 주어진 데이터를 날짜 형식으로 변환 |
| format | 원하는 날짜 형식으로 변경 |
| as.POSIXct | 타임스탬프를 날짜 및 시간으로 변환 |

10. 산점도 

| 함수 | 내용 |
| --- | --- |
| plot | 주어진 데이터의 산점도를 그림 |
| abline | 산점도에 추가 직선을 그림 |

11. 파일 읽기쓰기

| 함수 | 내용 |
| --- | --- |
| read.csv | CSV 파일 불러옴 |
| write.csv | 주어진 데이터를 CSV 파일로 저장 |
| saveRDS | 분석모델 및 R 파일 저장 |
| readRDS | 분석모델 및 R 파일 불러옴 |

## 데이터마트

- 데이터 분석에 앞서 분석 목적에 맞춰 데이터를 수집, 변형하는 과정 필요
- 데이터 마트란 데이터 웨어하우스로부터 특정 사용자가 관심을 갖는 데이터들을 주제별, 부서별로 추출하여 모은 비교적 작은 규모의 데이터 웨어하우스
- 분석 목적별, 주제별, 부서별로 데이터를 수집하고 변형하여 한 곳에 모으는 작업을 데이터 마트 개발이라 부름
- 효율적인 데이터 마트 개발을 위해 R에서 제공하는 reshape, sqldf, plyr 등의 다양한 패키지 활용 가능

### 데이터 전처리
- 데이터 마트를 개발한 후 전처리 과정을 거쳐야함
- 결측값과 이상값을 처리
- 변수선택, 차원축소, 파생변수 생성, 변수변환, 클래스 불균형

<aside>
💡 전처리: 결측값과 이상값을 처리하는 정제작업 + 변수 처리 (변수선택, 차원축소, 파생변수 생성 등)

</aside> </br>

<aside>
💡 요약변수: 원래의 데이터로부터 기본적인 통계 자료를 추출한 변수 (ex 합계, 평균, 횟수, 성별구분 등)
                 기본적인 변수들로 재활용성이 높음

</aside></br>

<aside>
💡 파생변수: 특정한 목적을 갖고 조건을 만족하는 변수들을 새롭게 생성 (ex 특정 매장의 월별 합계)
                주관적일 수 있으므로 논리적 타당성을 갖추어야함

</aside></br>

## 데이터 마트 개발을 위한 R 패키지 활용

### reshape 패키지

- melt 함수: 특정 변수 기준으로 데이터를 녹여 나머지 변수에 대한 세분화된 데이터 생성
- cast 함수: 녹은 데이터를 요약을 위해 새롭게 가공할 수 있게 도와줌

### sqldf 패키지

- SQL 문장을 활용해 R에서 데이터프레임을 다루는 것을 가능하게 해주는 패키지
- SAS에서 PROC SQL과 같은 역할

### plyr 패키지

- apply 함수를 기반으로 데이터를 분리하고 다시 결합하는 데이터 처리 기능 제공
- plyr 은 입력되는 데이터구조와 출력되는 데이터 구조에 따라 여러가지 함수 지원
- ddply 함수는 시험 출제 빈도와 실제 활용빈도가 상당히 높음!

| 입력/출력 데이터구조 | 데이터프레임 | 리스트 | 배열 |
| --- | --- | --- | --- |
| 데이터프레임 | ddply | ldply | adply |
| 리스트 | dlply | llply | alply |
| 배열 | daply | laply | aaply |

### data.table 패키지

- 데이터프레임과 유사하지만 특정 칼럼별로 주솟값을 갖는 인덱스를 생성하여 연산 및 검색을 빠르게 수행
- 적게는 4배에서 크게는 100배에 가까운 속도로 데이터 탐색, 연산, 정렬, 병합 가능

## 데이터 탐색

### 탐색적 데이터 분석 (EDA)

- 데이터를 이해하고 의미있는 관계를 찾아내기 위해 데이터의 통곗값과 분포 등을 시각화 및 분석
- EDA를 통해 데이터 특성을 이해하고 이를 토대로 분석 모델 구축

### 결측값

- 존재하지 않는 데이터
- NA 로 표현하지만 데이터 수집 환경에 따라 null, 공백, -1 등 다양하게 표현가능
- 결측값을 삭제하는 것이 일반적이나 경우에따라 의미를 갖는 경우도 있음
- 결측값 처리를 위한 패키지로 Amelia와 DMwR2 가 있음

### 결측값 대치 방법

1️⃣ 단순 대치법

- 결측값이 존재하는 데이터 삭제하는 방법
- 가장 쉬운 결측값 처리법이지만 결측값이 많은 경우 대량의 데이터 손실 발생
- `commplete.cases` 함수 → 하나의 열에 결측값이 존재하면 FALSE, 존재하지 않으면 TRUE 반환

2️⃣ 평균대치법

- 평균 혹은 중앙값으로 결측값을 대치하여 불완전한 자료를 완전한 자료로 만드는 방법
- 비조건부 평균대치법 → 데이터의 평균값으로 결측값 대치
- 조건부 평균대치법 → 실제 값들을 분석하여 회귀분석 활용
- 평균값 혹은 중앙값을 직접 구하여 결측값을 대치해도 되지만 DMwR2 패키지의 `central Imputaion`함수 사용하여 쉽게 대치 가능

3️⃣ 단순 확률 대치법

- 평균 대치법에서 추정량 표준 오차의 과소 추정 문제를 보완하고자 고안
- 대표적인 방법으로 `K-Nearest Neighbor` 방법이 있다
- `K-Nearest Neighbor` : K 최근접 이웃 알고리즘으로 K개의 데이터 중 가장 많은 데이터로 대치하는 방법.
- 주변 몇 개의 데이터가 결측값을 대치하기 좋은가에 대한 K 선정이 쉽지 않다는 단점 존재

4️⃣ 다중 대치법

- 여러번의 대치를 통해 n 개의 임의 완전자료를 만드는 방법
- 결측값 `대치`, `분석`, `결합`의 세 단계로 구성

### 이상값

- 존재하지 않는 결측값과 달리 다른 데이터에 비해 극단적으로 크거나 작은 값
- 입력자의 실수 또는 설문 응답자의 악의적인 의도에 의해 입력될 가능성 o

### 이상값 판단

1️⃣ ESD

- 평균으로부터 `표준편차 3` 만큼 떨어진 값들을 이상값으로 판단
- 정규분포에서 99.7%자료들은 표준편차 3 안에 위치하므로 전체 데이터의 약 0.3퍼센트를 이상값으로 구분

2️⃣ 사분위수

- 25%에 해당하는 값 (Q1)과 75%에 해당하는 값 (Q3)을 활용해 이상값 판단
- IQR 이란 사분위의 정상 범위인 Q1과 Q3 사이를 의미 (사분범위)
- 일반적으로 사분범위에서 1.5분위수를 벗어나는 경우 이상치로 판단
→ Q1 - 1.5 x IQR(하한최솟값) 보다 작거나 Q3+1.5xIQR(상한최댓값)보다 큰 값은 이상값

# 02장) 통계분석

## 통계 개요

### 표본조사

- 표본집단은 반드시 모집단을 대표할 수 있는 집단이어야 함
- 표본의 대표성을 신뢰할 수 있어야 표본조사를 통한 모집단의 통계분석 결과 또한 신뢰 가능

<aside>
💡 신뢰수준: 신뢰수준 95% → 100번 조사했을 때 오차범위 내에서 동일한 결과가 95번 나온다는 의미

</aside>

### 표본 추출 방법

1️⃣ 단순 랜덤 추출법

- N개의 모집단에서 n개의 데이터를 무작위 추출

2️⃣ 계통 추출법

- 모집단의 원소에 차례대로 번호 부여 후 일정한 간격을 두고 데이터 추출
- N개의 모집단에서 K개씩 (K = N/n) n개의 구간으로 나눈다.
- 첫 구간에서 (1,2,3 … K) 하나를 임의로 선택하고 K개씩 띄어서 표본 추출

3️⃣ 집락(군집:Cluster) 추출법

- 각 집락은 서로 동질적이며, 집락 내 데이터는 서로 이질적

4️⃣ 층화 추출법

- 집락 추출법과 반대
- 각 집락은 서로 이질적, 군집 내 데이터들은 서로 동질적
- 집락별로 추출되는 데이터의 비율을 어떻게 정할것인지에 때라 비례층화추추럽과 불비례층화추출법으로 나눔
    - 비례층화추출법: 전체데이터의 분포를 반영하여 각 군집별 데이터 추출
    - 불비례층화추출버비 전체데이터의 분포를 반영하지 않고 각 군집에서 원하는 개수의 데이터 추출



  ### 측정과 척도

- 질적 척도
    - 명목척도 : 측정 대상이 어느 집단에 속하는지 (ex 성별, 지역)
    - 순서척도(서열척도): 명목척도이면서 서열관계 o (ex 선호도, 신용도, 학년)
- 양적 척도
    - 구간척도(등간척도): 측정 대상의 속성의 양 측정가능 & 두 구간사이에 의미 o (ex 온도,지수)
    - 비율척도: 구간척도 이면서 절대적기준 0 이 존재해 사칙연산 o (ex 신장, 무게, 점수, 가격)

### 기술통계와 추리통계

- 기술통계
    - 표본자체의 속성이나 특징 파악
    - 자료를 요약,조직화,단순화
    - 최솟값,최댓값,중위수 등의 통계량이 기술 통계량
- 추리통계
    - 총계치를 바탕으로 오차를 고려하면서 모수를 확률적으로 추정
    - 가설의 검증하거나 확률적인 가능성 파악

## 확률과 확률분포

### 독립과 배반

- 독립: 서로 영향을 주지 않는 두 개의 사건
- 배반: 두 사건의 교집합이 없는 경우→ 동시에 일어날 수 없는 사건

### 이산확률분포

1️⃣ 베르누이 분포

- 확률변수 X가 취할 수 있는 값이 두 개인 경우 한번의 시행 시 성공과 실패로 나눌수 있는,
성공할 확률이 p 인 분포

2️⃣ 이항분포

- 베르누이를 확장
- n번의 베르누이 시행에서 k번 성공할 확률의 분포

3️⃣ 기하분포

- 성공확률이 p 인 베르누이 시행에서 처음으로 성공이 나올 때까지 k 번 실패할 확률의 분포

4️⃣ 다항분포

- 이항분포를 확장
- n번의 시행에서 각 시행이 3개이상의 결과를 가질수 있는 확률분포

5️⃣ 포아송분포

- 단위 시간 또는 단위 공간 내에서 발생할 수 있는 사건의 발생횟수에 대한 확률분포

6️⃣ 이산확률변수

- 확률변수가 취할 수 있는 실수 값의 수를 셀 수 있는 변수

### 연속확률분포

1️⃣ 균일분포

- 연속형 확률변수인 X가 취할 수 있는 모든 값에 대해 같은 확률을 갖고 있는 분포
- ex: 얼마나 들어있는지 모르는 200ml 우유팩에 들어있는 우유의 양
- 균일분포 그래프의 면적 넓이는 확률의 총합인 1

2️⃣ 정규분포

- 평균이  μ이고, 표준편차가 σ인 분포
- 표준정규분포: 평균이 0, 표준편차가 1, 확률변수 Z

3️⃣ t-분포

- 자유도가 n 인 t분포는 표준정규분포와 마찬가지로 평균이 0이고 좌우대칭인 종 모양 그래프
- 정규분포보다 두꺼운 꼬리
- 현실적으로 모표준편차를 모르기때문이 t분포를 이용해 모평균 검정 또는 두 집단의 평균이 동일한지 계산하기 위한 검정통계량으로 활용
- 자유도가 커질수록 t분포는 표준정규분포에 가까워짐

<aside>
💡 자유도: 표본자료들이 모집단에 대한 정보를 주는 독립적인 자료의 개수
ex) 의자4개와 사람4명 → 앞3명은 의자 선택 가능, 마지막사람은 선택권 x 
      따라서 자유도는 4-1 = 3

</aside>

4️⃣ 카이제곱분포

- 표준정규분포를 따르는 확률변수 Z1, Z2, Z3, …Zn의 제곱의 합 X는 자유도가 n인 카이제곱 분포를 따름
- 모평균과 모분산을 모르는 두 개 이상의 집단 간 동질성 검정 또는 모분산 검정을 위해 활용

5️⃣ F분포

- 서로 독립인 두 카이제곱 분포를 따르는 확률변수를 각각의 자유도로 나누었을 때 서로의 비율 X는 자유도가 k1, k2인 F 분포를 따름
- 등분산 검정 및 분산분석에 활용

6️⃣ 연속확률변수

- 확률변수가 취할 수 있는 실수 값이 어떤 특정 구간 전체에 해당해 그 수를 셀 수 없는 변수
- 연속확률변수에서는 확률밀도함수의 아래면적이 확률을 의미

## 추정과 가설검정

### 추정

1️⃣ 모수의 추정

- 통계적 방법론에서 궁극적으로 알고싶은 것 → 모수 (모집단의 확률분포 및 특성을 알려주는 모평균, 모분산)
- 전수조사는 불가능하므로 표본조사로 모수를 추정

2️⃣ 점추정

- 모평균을 추정할 때 모평균을 하나의 특정한 값이라고 예측
- 모평균 추정을 위한 불편추정량은 표본집단의 평균값인 표본평균이 대표적
- 불편추정량 : 모수 추정 시 추정값과 실제값 차이의 기댓값이 0으로 어느 한쪽으로 편향되지 않아 모수를 추정하기에 이상적인 값을 의미.
- 불편추정량 중에서 최소 분산을 가진 추정량이 가장 좋은 추정량

3️⃣ 구간추정

- 모수가 특정한 값일것이라 예상하는 점추정과 달리 모수가 특정 구간 안에 존재할것이라 예상
- 모수(μ)가 특정 구간안에 포함될 확률인 신뢰도(신뢰수준)가 필요
- 신뢰도는 95%와 99%를 주로 사용

### 가설검정

- 모집단의 특성에 대한 주장 또는 가설을 세우고 표본에서 얻은 정보를 이용해 가설이 옳은지 판단하는 과정
- 귀무가설과 대립가설로 구분함

1️⃣ 귀무가설

- 실험, 연구를 통해 기각하고자 하는 가설로, H0로 표기
- 대립가설과 상반되며 귀무가설의 기각을 통해 입증하고자 하는 주장을 관철
- 일반적으로 ‘같다 (=), 차이가 없다’ 기호를 사용하여 나타냄

2️⃣ 대립가설 

- 귀무가설에 반대되는 가설로 귀무가설을 기각함으로써 채택함. H1으로 표기
- 실험, 연구를 통해 증명하고자 하는 새로운 아이디어 혹은 가설

3️⃣ 제 1종 오류와 제 2종 오류

- 제 1종 오류: 귀무가설이 사실인데 귀무가설이 틀렸다고 결정하는 오류
- 제 2종 오류: 귀무가설이 사실이 아닌데 귀무가설이 사실이라고 결정하는 오류

4️⃣ 검정통계량

- 귀무가설의 옳고 그름을 판단할 수 있는 값

5️⃣ 기각역

- 귀무가설을 기각하게 될 검정통계량의 영역
- 검정통계량이 기각역 내에 있으면 귀무가설을 기각
- 기각역의 경곗값을 임곗값이라고 함

6️⃣ 유의수준

- 귀무가설이 참인데도 이를 잘못 기각하는 오류를 범할 확률의 최대 허용 한계.
- 주로 1%와 5%를 사용
- 제1종오류와 제 2종오류는 서로 반비례관계이므로 제 1종오류를 허용할 수 있는 최대 확률 유의수준을 설정하여 가설검정을 수행함

7️⃣ 유의확률

- p-value는 귀무가설을 지지하는 정도를 나타낸 확률값.
- p-value 가 유의수준보다 작은 경우 귀무가설이 참임을 가정했을 때 이러한 결과가 나올 확률이 매우 적다고 해석해 귀무가설을 기각하고 대립가설을 채택함
- p-value가 유의수준보다 크면 귀무가설 채택

<aside>
💡 유의수준: 귀무가설이 사실일 때 이를 기각하는 확률
                제 1종오류가 발생할 수 있는 최대의 확률
                주로 5% 사용

</aside>

<aside>
💡 유의확률: 귀무가설을 지지하는 정도로 검정통계량으로부터 얻는 값
                귀무가설을 기각할 때 그 결정이 잘못되었을 확률

</aside>

<aside>
💡 유의확률(p-value) < 유의수준(0.05) → 귀무가설 기각
유의확률(p-value) > 유의수준(0.05) → 귀무가설 기각할 수 없음

</aside>

### 비모수 검정

- 모수검정 vs 비모수검정
    - 모수검정은 표본의 정규성이 반드시 확보되어야함
    - 비모수검정은 정규성검정에서 정규분포를 따르지 않는다고 증명되거나 소규모 실험인경우에 사용
    - 정규분포를 따르지 않는 경우 자료를 크기순으로 배열해 순위를 매겨 순위의 합을 통해 차이를 비교하는 순위합검정 사용 → 비모수검정
    - 비모수 검정은 모수의 분포에 대해 어떠한 가정도 하지 않는 검정
    
- 모수검정과 비모수검정의 차이
    
    
    | 모수검정 | 비모수검정 |
    | --- | --- |
    | 등간척도, 비율척도 | 명목척도, 서열척도 |
    | 평균값 | 중앙값 |
    | 피어슨 상관계수 | 스피어만 순위상관계수 |
    | one sample t-test, two sample t-test, paired t-test, one way anova | 부호검정, Wilcoxon 부호 순위 검정, Mann-Whitney 검정, Kruskal Wallis 검정, 연속성검정, 프리드만검정, 순위합검정 |

## 기초통계

### t-검정

1️⃣ 일표본 단측 t-검정

- 하나의 모집단의 평균값을 특정값과 비교
- 모수값이 ‘~보다 크다’ 혹은 ‘~보다 작다’ 와 같이 한쪽으로의 방향성을 가짐

```r
> weights <-runif(10, min=49, max=52)
> t.test( weights, mu=50, alternative = 'greater') #대립가설: greater 귀무가설:less

One Sample t-test

data: weishts
t = 2.6963, df = 9, p-value = 0.01227
```

- 검정통계량은 t=2.6963
- 자유도는 df = 9  (표본수 - 1 = 자유도)
- p-value가 유의수준 0.05 보다 작으므로 귀무가설을 기각

2️⃣ 일표본 양측 t-검정

- 방향성을 갖지 않고 모수값이 ‘~이다’ 혹은 ‘~이 아니다’와 같이 방향성이 없는경우
- `alternative = two.sided`  가 있으면 양측검정

3️⃣ 이표본 단측 t-검정

- 이표본 t-검정 이므로 두 모집단의 분산이 같음을 의미하는 등분산성 검정 (F검정) 먼저 수행해야함
- 두 모집단에서 각각 추출된 표본이 서로 관계가 없는 독립을 만족해야함
- 두 집단에 대해 모수를 비교할 때 ‘~이 ~보다 크다’ 혹은 ‘~이 ~보다 작다’와 같이 두 집단 사이에 대소가 있는 경우 수행

4️⃣ 이표본 양측 t-검정

- 두 집단에 대해 모수 비교시 ‘두 집단이 같다’ 혹은 ‘두 집단이 다르다’와 같이 두 집단 사이 대소가 없는 경우 수행하는 검정방법

5️⃣ 대응표본 t-검정

- 동일한 대상에 대해 두 가지 관측치가 있는 경우 이를 비교해 차이가 있는지 검정
- 주로 실험 전후의 효과를 비교하기 위해 사용
- ex) 두 집단에 신약 투약 이후의 전후 수치 비교
- ex) 새로운 정책이 시행된 후의 부동산 가격의 전후비교

## 분산분석 (ANOVA)

### 분산분석

- 세 개 이상의 모집단이 있을 경우 여러 집단 사이의 평균을 비교하는 검정 방법
- 분산분석의 귀무가설은 항상 ‘H0: 모든 집단 간 평균은 같다’이다.
- 분산분석 수행 시 다음 세 가지 가정사항을 필요로 함
    - 정규성 : 각 집단의 표본들은 정규분포를 따라야 함
    - 등분산성: 각 집단은 동일한 분산을 가져야 함
    - 독립성: 각 집단은 서로에게 영향을 주지 않음
- 분산분석의 단점: 귀무가설을 기각할 경우 어느 집단 간 평균이 같은지, 혹은 어느 집단 간의 평균이 얼마나 다른지 알 수 없음
- 따라서 분산분석의 귀무가설을 기각했을 때 어느 집단 간에 차이를 보이는지 알기 위한 사후검정 방법으로 Scheffe,Turkey,Duncan등의 방법 사용
- 독립변수 : 범주형
- 종속변수: 연속형
- `aov` 함수 사용
- `aov( 연속형 ~ 범주형)`  으로 입력
- 분산분석에는 ‘(집단간분산)%(집단내분산)’으로 계산되는 F-value사용
- 셋 이상의 집단 간 평균을 비교하는 상황에서 하나의 집단에 속하는 독립변수와 종속변수가 모두 한 개 일때 → 일원분산분석
- 일원분산분석 수행 시 독립변수가 두개이상일때 → 이원분산분석
- 

## 교차분석

### 교차분석

- 범주형 자료 (명목, 서열)간의 관계 분석시 사용
- 카이제곱검정통계량 이용
- 적합도검정, 독립성검정, 동질성검정에 사용

### 적합도검정

- 관측값이 예상값과 일치하는지 여부 검정
- 실험데이터 = `관측도수`, 예측값 = `기대도수`
- 귀무가설: 실제분포와 예측분포간 차이가 없다
- 대립가설: 차이가 잆다
- 유의수준은 보통 0.05로 설정
- 기각값은 카이제곱 분포표에서 유의수준 0.05일 때 자유도 df=범주수-1에 해당하는 값

### 독립성 검정

- 모집단이 두 변수에 의해 범주화됐을 때 그 두 변수들 사이의 관계가 독립적인지 검정
- 카이제곱 검정에 의한 독립성 검정 결과는 두 범주형 변수 간 관계가 있는지 없는지만을 나타내며 강도를 말해주진 않음
- 따라서 두 범주형 변수가 유의한 관계가 있다고 해서 상관관계가 강하다고 보지는 않음. → 상관분석을 실시해 수치를 따져봐야 함

### 동질성검정

- 관측값들이 정해진 범주 내에서 서로 비슷하게 나타나고 있는지 검정
- 계산 및 검증법은 독립성 검정과 같음

## 상관분석

### 상관분석의 개념

- 두 변수간 선형적 관계가 존재하는지 분석
- 상관계수 활용
- 상관계수는 +1과 -1 사이의 값
- +1에 가까울수록 양의 상관관계, -1에 가까울수록 음의 상관관계
- 0에 가까울수록 상관관계가 없음
- 상관관계가 있다고해서 인과관계가 있다는 뜻은 아님
- 상관분석의 귀무가설은 `H0: r_xy = 0` ( 두 변수는 아무 상관관계가 없다)
- 명목척도에 대해서는 상관계수를 구할 수 없다!

### 피어슨 상관분석(선형적 상관관계)

- 모수적 방법의 하나로 두 변수가 모두 정규분포를 따른다는 가정 필요
- 등간척도와 비율척도인 경우 피어슨상관계수

### 스피어만 상관분석 (비선형적 상관관계)

- 측정된 두 변수들이 서열척도일 때 사용하는 상관계수
- 비모수적 방법으로 관측값의 순위에 대해 상관계수 계산하는 방법
- 서열척도인 경우 스피어만 상관계수

## 회귀분석
